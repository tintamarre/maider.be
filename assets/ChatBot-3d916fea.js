import{o,c as r,b as e,t as d,a as g,F as m,g as h,h as l,f as a,w as _,i as p,v as f}from"./app-4c5f406d.js";import c from"./botMessage-b63431f4.js";import u from"./userMessage-c3a672ba.js";import{_ as v}from"./plugin-vue_export-helper-c27b6911.js";import"./maiderWaiting-05d7f30b.js";import"./maiderIcon-4d46a66c.js";const y={class:"h-screen overflow-hidden flex items-center justify-center",style:{background:"#edf2f7"}},b={class:"flex-1 p:2 sm:p-6 justify-between flex flex-col h-screen"},x={class:"flex sm:items-center justify-between py-3 border-b-2 border-gray-200"},w={class:"relative flex items-center space-x-4"},k=e("div",{class:"relative"},null,-1),M={class:"flex flex-col leading-tight"},S={class:"text-2xl mt-1 flex items-center"},B={class:"text-gray-700 mr-3"},j={class:"text-lg text-gray-600"},q=e("div",{class:"flex items-center space-x-2"},null,-1),C={id:"messages",class:"flex flex-col space-y-4 p-3 overflow-y-auto scrollbar-thumb-blue scrollbar-thumb-rounded scrollbar-track-blue-lighter scrollbar-w-2 scrolling-touch"},I={class:"chat-message"},O={class:"chat-message"},U={class:"chat-message"},V={class:"border-t-2 border-gray-200 px-4 pt-4 mb-2 sm:mb-0"},E={class:"absolute right-0 items-center inset-y-0 hidden sm:flex"},N={key:0,type:"submit",class:"inline-flex items-center justify-center rounded-lg px-4 py-3 transition duration-500 ease-in-out text-white bg-gray-400 hover:bg-blue-400 focus:outline-none"},T=e("span",{class:"font-bold"},"Envoyer",-1),D=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-6 w-6 ml-2 transform rotate-90"},[e("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})],-1),z=[T,D],F={components:{userMessage:u},props:{domain:{type:Object,required:!0}},data(){return{messages:[],inputMessage:"",waiting:!1,error:!1,session_token:null,session_created_at:null}},mounted(){sessionStorage.getItem("session_token")===null&&(sessionStorage.setItem("session_token",Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)),sessionStorage.setItem("created_at",new Date().toISOString().split(".")[0]+"Z")),this.session_token=sessionStorage.getItem("session_token"),this.session_created_at=sessionStorage.getItem("created_at")},methods:{sendMessage(){const n={content:this.inputMessage,isUser:!0};this.messages.push(n),this.inputMessage="",this.waiting=!0,fetch("https://api.datawb.be/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:this.session_token,domain:this.domain.domain,query:n.content})}).then(s=>s.json()).then(s=>{const i={content:s.answer,isUser:!1};this.messages.push(i),this.waiting=!1;var t=this.$el.querySelector("#messages");t.scrollTop=t.scrollHeight}).catch(s=>{this.waiting=!1,this.error=!0,console.error("Erreur lors de la requÃªte:",s)})}}},P=Object.assign(F,{__name:"ChatBot",setup(n){return(s,i)=>(o(),r("div",y,[e("div",b,[e("div",x,[e("div",w,[k,e("div",M,[e("div",S,[e("span",B,d(n.domain.title),1)]),e("span",j,d(n.domain.description),1)])]),q]),e("div",C,[e("div",I,[g(c,{message:n.domain.intro},null,8,["message"])]),(o(!0),r(m,null,h(s.messages,(t,A)=>(o(),r("div",{key:t.id,class:"chat-message"},[t.isUser?a("v-if",!0):(o(),l(c,{key:0,message:t.content},null,8,["message"])),t.isUser?(o(),l(u,{key:1,message:t.content},null,8,["message"])):a("v-if",!0)]))),128)),e("div",O,[s.waiting?(o(),l(c,{key:0,message:"Merci de patienter quelques secondes.",isWaiting:"true"})):a("v-if",!0)]),e("div",U,[s.error?(o(),l(c,{key:0,message:"Oups. Il semble y avoir une erreur. ðŸ˜Ÿ",hasError:"true"})):a("v-if",!0)])]),e("div",V,[e("form",{onSubmit:i[1]||(i[1]=_((...t)=>s.sendMessage&&s.sendMessage(...t),["prevent"])),class:"relative flex"},[p(e("input",{type:"text",placeholder:"Posez votre question ici!","onUpdate:modelValue":i[0]||(i[0]=t=>s.inputMessage=t),class:"w-full focus:outline-none border-none focus:ring-0 focus:ring-transparent focus:placeholder-gray-400 text-gray-600 placeholder-gray-600 pl-12 bg-gray-100 rounded-md py-3"},null,512),[[f,s.inputMessage]]),e("div",E,[s.inputMessage?(o(),r("button",N,z)):a("v-if",!0)])],32)])])]))}}),G=v(P,[["__file","ChatBot.vue"]]);export{G as default};
