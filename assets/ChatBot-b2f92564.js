import{_ as g,o,c as r,b as e,a as d,t as u,F as h,g as p,h as l,f as i,w as f,i as _,v}from"./app-dcf1add8.js";import b from"./maiderIcon-d19d58e9.js";import c from"./botMessage-79241c25.js";import m from"./userMessage-3e0e4fb3.js";import"./maiderWaiting-f3dd780f.js";const y={class:"h-screen overflow-hidden flex items-center justify-center",style:{background:"#edf2f7"}},x={class:"flex-1 p:2 sm:p-6 justify-between flex flex-col h-screen"},w={class:"flex sm:items-center justify-between py-3 border-b-2 border-gray-200"},k={class:"relative flex items-center space-x-4"},M={class:"relative"},S={class:"flex flex-col leading-tight"},j={class:"text-2xl mt-1 flex items-center"},B={class:"text-gray-700 mr-3"},I={class:"text-lg text-gray-600"},C=e("span",{class:"text-sm text-gray-400"},"Je suis maider, lâ€™assistant virtuel du SPW et je peux vous informer sur les aides disponibles en RÃ©gion wallonne. Mes rÃ©ponses ne sont pas encore exhaustives et ne peuvent pas se substituer Ã  la documentation officielle. ",-1),q=e("button",{class:"mr-1 mb-1 text-white font-bold py-1 px-1 rounded",alt:"TÃ©lÃ©charger ma conversation"}," ðŸ’¾ ",-1),O=e("div",{class:"flex items-center space-x-2"},null,-1),U={ref:"messageDisplay",id:"messages",class:"flex flex-col space-y-4 p-3 overflow-y-auto scrollbar-thumb-blue scrollbar-thumb-rounded scrollbar-track-blue-lighter scrollbar-w-2 scrolling-touch"},V={class:"chat-message"},D={class:"chat-message"},E={class:"chat-message"},N={class:"border-t-2 border-gray-200 px-4 pt-4 mb-2 sm:mb-0"},T={class:"absolute right-0 items-center inset-y-0 hidden sm:flex"},P={key:0,type:"submit",class:"inline-flex items-center justify-center rounded-lg px-4 py-3 transition duration-500 ease-in-out text-white bg-pink-700 hover:bg-gray-400 focus:outline-none"},z=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-6 w-6 ml-1 mr-2 transform"},[e("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})],-1),F=e("span",{class:"font-bold"},"Envoyer",-1),J=[z,F],W={components:{userMessage:m},props:{domain:{type:Object,required:!0}},data(){return{messages:[],inputMessage:"",waiting:!1,error:!1,session_token:null,session_created_at:null}},mounted(){sessionStorage.getItem("session_token")===null&&(sessionStorage.setItem("session_token",Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)),sessionStorage.setItem("created_at",new Date().toISOString().split(".")[0]+"Z")),this.session_token=sessionStorage.getItem("session_token"),this.session_created_at=sessionStorage.getItem("created_at")},methods:{sendMessage(){const n={content:this.inputMessage,isUser:!0};this.messages.push(n),this.inputMessage="",this.waiting=!0,fetch("https://api.datawb.be/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:this.session_token,domain:this.domain.domain,query:n.content})}).then(s=>s.json()).then(s=>{s.answer=s.answer.replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank" class="underline">ðŸ”— $1</a>');const a={content:s.answer,isUser:!1};this.messages.push(a),this.waiting=!1}).catch(s=>{this.waiting=!1,this.error=!0,console.error("Erreur lors de la requÃªte:",s)})}}},$=Object.assign(W,{__name:"ChatBot",setup(n){return(s,a)=>(o(),r("div",y,[e("div",x,[e("div",w,[e("div",k,[e("div",M,[d(b,{class:"w-10 sm:w-16 h-10 sm:h-16 rounded-full"})]),e("div",S,[e("div",j,[e("span",B,u(n.domain.title),1)]),e("span",I,u(n.domain.description),1),C]),q]),O]),e("div",U,[e("div",V,[d(c,{message:n.domain.intro},null,8,["message"])]),(o(!0),r(h,null,p(s.messages,(t,A)=>(o(),r("div",{key:t.id,class:"chat-message"},[t.isUser?i("v-if",!0):(o(),l(c,{key:0,message:t.content},null,8,["message"])),t.isUser?(o(),l(m,{key:1,message:t.content},null,8,["message"])):i("v-if",!0)]))),128)),e("div",D,[s.waiting?(o(),l(c,{key:0,message:"Merci de patienter quelques secondes.",isWaiting:"true"})):i("v-if",!0)]),e("div",E,[s.error?(o(),l(c,{key:0,message:"Oups. Il semble y avoir une erreur. ðŸ˜Ÿ",hasError:"true"})):i("v-if",!0)])],512),e("div",N,[e("form",{onSubmit:a[1]||(a[1]=f((...t)=>s.sendMessage&&s.sendMessage(...t),["prevent"])),class:"relative flex"},[_(e("input",{type:"text",placeholder:"Posez votre question ici!","onUpdate:modelValue":a[0]||(a[0]=t=>s.inputMessage=t),class:"w-full focus:outline-none border-none focus:ring-0 focus:ring-transparent focus:placeholder-gray-400 text-gray-600 placeholder-gray-600 pl-12 bg-gray-100 rounded-md py-3"},null,512),[[v,s.inputMessage]]),e("div",T,[s.inputMessage?(o(),r("button",P,J)):i("v-if",!0)])],32)])])]))}}),K=g($,[["__file","ChatBot.vue"]]);export{K as default};
